{let g=null,Z=0,U=0,P,Q,j=null,O=0,L=285217039,G=null,C,D,E,W=-1,S=0,T=0,ux=0,uy=0,uz=0,uw=0,vx=0,vy=0,vz=0,vw=0;const N=globalThis[new URL(document.currentScript.src).hash.slice(1)||'globalThis']??={},B=[g,g,g,g,g,g,g,g],X=t=>{const o=B[U];if(o)o.u=-1;B[U]=t;t.u=U;g.bindTexture(3553,t)},F=Float32Array,V=[];N.Formats={R:[33321,6403,5121],RG:[33323,33319,5121],RGB:[6407,6407,5121],RGBA:[6408,6408,5121],RGB565:[36194,6407,33635],R11F_G11F_B10F:[35898,6407,35899],RGB5_A1:[32855,6408,32820],RGB10_A2:[32857,6408,33640],RGBA4:[32854,6408,32819],RGB9_E5:[35901,6407,35902],R8:[33321,36244,5121],RG8:[33323,33320,5121],RGB8:[32849,6407,5121],RGBA8:[32856,6408,5121],R16:[33332,36244,5123],RG16:[33338,33320,5123],RGB16:[36215,6407,5123],RGBA16:[36214,6408,5123],R32:[33334,36244,5125],RG32:[33340,33320,5125],RGB32:[36209,6407,5125],RGBA32:[36208,6408,5125],R16F:[33325,36244,5131],RG16F:[33327,33320,5131],RGB16F:[34843,6407,5131],RGBA16F:[34842,6408,5131],R16F_32F:[33325,36244,5126],RG16F_32F:[33327,33320,5126],RGB16F_32F:[34843,6407,5126],RGBA16F_32F:[34842,6408,5126],R32F:[33326,36244,5126],RG32F:[33328,33320,5126],RGB32F:[34837,6407,5126],RGBA32F:[34836,6408,5126]};P=N.Texture=(w=0,h=0,F=N.Formats.RGBA8,o=Z)=>{const t=g.createTexture();t.u=-1;t.width=0;t.height=0;t.format=F;if(w|h)t.of(w,h,F,o);return t};P.defaultOptions=o=>Z=o;Object.assign(WebGLTexture.prototype,{from(t,F=N.Formats.RGBA8,o=Z){if(typeof t!='object')return;this.format=F;if(t instanceof Blob)t=createImageBitmap(t);if(t.then)return t.then(t=>this.from(t,F,o));X(this);const{0:A,1:B,2:C}=F,f=(~o>>1)&3;g.texImage2D(3553,0,A,this.width=t.width,this.height=t.height,0,B,C,t);g.texParameteri(3553,10240,(~o&1)+9728);if(o&8)g.texParameteri(3553,10241,(f&1)+9728);else g.texParameteri(3553,10241,9984+f);g.texParameteri(3553,10242,o&32?33648:o&16?33071:10497);g.texParameteri(3553,10243,o&128?33648:o&64?33071:10497);if(!(o&8))g.generateMipmap(3553);return this},o(o=Z){X(this);g.texParameteri(3553,10240,(~o&1)+9728);const f=(~o>>1)&3;if(o&8)g.texParameteri(3553,10241,(f&1)+9728);else g.texParameteri(3553,10241,9984+f);g.texParameteri(3553,10242,o&32?33648:o&16?33071:10497);g.texParameteri(3553,10243,o&128?33648:o&64?33071:10497);return this},of(w=0,h=0,F=N.Formats.RGBA8,o=Z){X(this);const f=(~o>>1)&3;this.format=F;g.texStorage2D(3553,1,F[0],this.width=w,this.height=h);g.texParameteri(3553,10240,(~o&1)+9728);if(o&8)g.texParameteri(3553,10241,(f&1)+9728);else g.texParameteri(3553,10241,9984+f);g.texParameteri(3553,10242,o&32?33648:o&16?33071:10497);g.texParameteri(3553,10243,o&128?33648:o&64?33071:10497);if(!(o&8))g.generateMipmap(3553);return this},upload(x=0,y=0,w,h,d){X(this);g.texSubImage2D(3553,0,x,y,w,h,this.format[1],this.format[2],d);if(g.getTexParameter(3553,10241)>=9984)g.generateMipmap(3553)},uv(x=0,y=0,w=0,h=0){return{x:x/this.width,y:y/this.height,w:w/this.width,h:h/this.height,sub}}});P=N.CommandBuffer=()=>{const a=[];a.l=V.pop()??new F(8190);a.i=0;return new M(a)};P.single=(a=k,b=0,c=0,d=0,e=0)=>N.CommandBuffer.singleMat(a,1,0,0,1,0,0,b,c,d,e);P.singleRect=(a=k,b=0,c=0,d=1,e=1,f=0,g=0,h=0,i=0)=>N.CommandBuffer.singleMat(a,d,0,0,e,b,c,f,g,h,i);P.singleMat=({x:X,y:Y,w:W,h:H}=k,a=0,b=0,c=0,d=0,e=0,f=0,t1=0,t2=0,t3=0,t4=0)=>{const x=new F(14);x[0]=a;x[1]=c;x[2]=e;x[3]=b;x[4]=d;x[5]=f;x[6]=X;x[7]=Y;x[8]=W;x[9]=H;x[10]=t1;x[11]=t2;x[12]=t3;x[13]=t4;return x};function sub(a,b,c,d){return{x:this.x+a*this.w,y:this.y+b*this.h,w:this.w*c,h:this.h*d,sub}}N.uv=(x=0,y=0,w=1,h=1)=>({x,y,w,h,sub});const k=N.uv();N._=void 0;class M{R;#a;#b;#c;#d;#e;#f;constructor(z,a=1,b=0,c=0,d=1,e=0,f=0){this.R=z;this.#a=a;this.#b=b;this.#c=c;this.#d=d;this.#e=e;this.#f=f}translate(x=0,y=0){this.#e+=x*this.#a+y*this.#c;this.#f+=x*this.#b+y*this.#d}scale(x=1,y=x){this.#a*=x;this.#b*=x;this.#c*=y;this.#d*=y}rotate(r=0){const C=Math.cos(r),S=Math.sin(r),a=this.#a,b=this.#b,c=this.#c,d=this.#d;this.#a=a*C-c*S;this.#b=b*C-d*S;this.#c=a*S+b*C;this.#d=b*S+d*C}transform(a,b,c,d,e,f){const ta=this.#a,tb=this.#b,tc=this.#c,td=this.#d,te=this.#e,tf=this.#f;this.a=a*ta+c*tb;this.b=b*ta+d*tb;this.c=a*tc+c*td;this.d=b*tc+d*td;this.e=a*te+c*tf+e;this.f=b*te+d*tf+f}new(a=1,b=0,c=0,d=1,e=0,f=0){return new M(this.R,a,b,c,d,e,f)}reset(a=1,b=0,c=0,d=1,e=0,f=0){this.#a=a;this.#b=b;this.#c=c;this.#d=d;this.#e=e;this.#f=f}box(x=0,y=0,w=1,h=w){this.#e+=x*this.#a+y*this.#c;this.#f+=x*this.#b+y*this.#d;this.#a*=w;this.#b*=w;this.#c*=h;this.#d*=h}to(x,y){if(typeof x=='object')({x,y}=x);return{x:this.#a*x+this.#c*y+this.#e,y:this.#b*x+this.#d*y+this.#f}}from(x,y){if(typeof x=='object')({x,y}=x);const a=this.#a,b=this.#b,c=this.#c,d=this.#d,det=a*d-b*c;return{x:(x*d-x*c+c*this.#f-d*this.#e)/det,y:(y*a-y*b+b*this.#e-a*this.#f)/det}}copy(){return new M(this.R,this.#a,this.#b,this.#c,this.#d,this.#e,this.#f)}add({x:X,y:Y,w:W,h:H}=k,t1=0,t2=0,t3=0,t4=0){const j=(this.R.i+=14)-14,l=this.R.l;l[j]=this.#a;l[j+1]=this.#c;l[j+2]=this.#e;l[j+3]=this.#b;l[j+4]=this.#d;l[j+5]=this.#f;l[j+6]=X;l[j+7]=Y;l[j+8]=W;l[j+9]=H;l[j+10]=t1;l[j+11]=t2;l[j+12]=t3;l[j+13]=t4;if(j==8176)this.R.push(l),this.R.l=V.pop()??new F(8190),this.R.i=0}addRect({x:X,y:Y,w:W,h:H}=k,x=0,y=0,w=1,h=1,t1=0,t2=0,t3=0,t4=0){const j=(this.R.i+=14)-14,l=this.R.l;l[j]=this.#a*w;l[j+1]=this.#c*h;l[j+2]=this.#e+x*this.#a+y*this.#c;l[j+3]=this.#b*w;l[j+4]=this.#d*h;l[j+5]=this.#f+x*this.#b+y*this.#d;l[j+6]=X;l[j+7]=Y;l[j+8]=W;l[j+9]=H;l[j+10]=t1;l[j+11]=t2;l[j+12]=t3;l[j+13]=t4;if(j==8176)this.R.push(l),this.R.l=V.pop()?? new F(8190),this.R.i=0}addMat({x:X,y:Y,w:W,h:H}=k,a=1,b=0,c=0,d=1,e=0,f=0,t1=0,t2=0,t3=0,t4=0){const j=(this.R.i+=14)-14,l=this.R.l,ta=this.#a,tb=this.#b,tc=this.#c,td=this.#d,te=this.#e,tf=this.#f;l[j]=a*ta+c*tb;l[j+1]=a*tc+c*td;l[j+2]=a*te+c*tf+e;l[j+3]=b*ta+d*tb;l[j+4]=b*tc+d*td;l[j+5]=b*te+d*tf+f;l[j+6]=X;l[j+7]=Y;l[j+8]=W;l[j+9]=H;l[j+10]=t1;l[j+11]=t2;l[j+12]=t3;l[j+13]=t4;if(j==8176)this.R.push(l),this.R.l=V.pop()?? new F(8190),this.R.i=0}upload(){const b=g.createBuffer(),L=this.R.length*32760+(this.R.i<<2);g.bindBuffer(34962,b);g.bufferData(34962,L,35044);let i=0;for(;i<this.R.length;i++)g.bufferSubData(34962,i*32760,this.R[i]);g.bufferSubData(34962,i*32760,this.R.l,0,this.R.i);const v=g.createVertexArray();g.bindVertexArray(G=v);g.vertexAttribPointer(0,3,5126,0,56,0);g.vertexAttribPointer(1,3,5126,0,56,12);g.vertexAttribPointer(2,4,5126,0,56,24);g.vertexAttribPointer(3,4,5126,0,56,40);for(let i=0;i<4;i++){g.enableVertexAttribArray(i);g.vertexAttribDivisor(i,1)}v.count=L/56;if(V.length<128)V.push(this.R.l);this.R.l=null;for(let i=Math.min(this.R.length);i>=0;i--)V.push(this.R[i]);this.R.length=0;return v}get count(){return this.R.length*585+this.R.i/14}}const I=new F(6);class K{j;#a;#b;#c;#d;#e;#f;#ux;#uy;#uz;#uw;#vx;#vy;#vz;#vw;get width(){return this.j?this.j.width:g.canvas.width}get height(){return this.j?this.j.height:g.canvas.height}get texture(){return this.j?.t}download(x=0,y=0,w=this.width,h=this.height,a=null){g.bindFramebuffer(36008,this.j);const f=this.j?this.j.format[2]:5121;if(!a){const A=this.j?this.j.format[0]:32856,S=(A==6408||A==32856||A==36214||A==36208||A==34842||A==34836?4:A==6407||A==32849||A==36215||A==36209||A==34843||A==34837?3:A==33323||A==33338||A==33340||A==33327||A==33328?2:1)*w*h;a=f==5121?new Uint8Array(S):f==5126?new F(S):f==5125||f==35899||f==33640||f==35902?new Uint32Array(S):new Uint16Array(S)}g.readPixels(x,y,w,h,this.j?this.j.format[1]:6408,f,a);return a}resize(w=this.width,h=this.height,F=N.Formats.RGBA8){if(this.j){this.j.t=null;g.bindFramebuffer(36008,this.j);const s=g.createRenderbuffer();g.bindRenderbuffer(36161,s);g.renderbufferStorage(36161,F[0],w,h);g.framebufferRenderbuffer(36008,36064,36161,s);if(this.j.S>=0){const s=g.createRenderbuffer();g.bindRenderbuffer(36161,s);g.renderbufferStorage(36161,36168,w,h);g.framebufferRenderbuffer(36008,36128,36161,s)}}else{g.canvas.width=w;g.canvas.height=h;if(g.drawingBufferStorage)g.drawingBufferStorage(F[0],w,h);else if(W&(F!=N.Formats.RGBA8))W&=-2,console.warn('Browser does not support specifying format for main target')}}setTexture(T){if(!this.j)throw new TypeError('Cannot attach a texture to the main target (its output must always be the <canvas>, use .resize() to change size/format)');g.bindFramebuffer(36008,this.j);if(this.j.t===T){this.j.width=T.width;this.j.height=T.height;if(this.j.S>=0){const s=g.createRenderbuffer();g.bindRenderbuffer(36161,s);g.renderbufferStorage(36161,36168,T.width,T.height);g.framebufferRenderbuffer(36008,36128,36161,s)}return}this.j.t=T;this.j.width=T.width;this.j.height=T.height;g.framebufferTexture2D(36008,36064,3553,T,0);if(this.j.S>=0){const s=g.createRenderbuffer();g.bindRenderbuffer(36161,s);g.renderbufferStorage(36161,36168,T.width,T.height);g.framebufferRenderbuffer(36008,36128,36161,s)}}constructor(j,a=1,b=0,c=0,d=1,e=0,f=0,ux=0,uy=0,uz=0,uw=0,vx=0,vy=0,vz=0,vw=0){this.j=j;this.#a=a;this.#b=b;this.#c=c;this.#d=d;this.#e=e;this.#f=f;this.#ux=ux;this.#uy=uy;this.#uz=uz;this.#uw=uw;this.#vx=vx;this.#vy=vy;this.#vz=vz;this.#vw=vw}translate(x=0,y=0){this.#e+=x*this.#a+y*this.#c;this.#f+=x*this.#b+y*this.#d}scale(x=1,y=x){this.#a*=x;this.#b*=x;this.#c*=y;this.#d*=y}rotate(r=0){const C=Math.cos(r),S=Math.sin(r),a=this.#a,b=this.#b,c=this.#c,d=this.#d;this.#a=a*C-c*S;this.#b=b*C-d*S;this.#c=a*S+b*C;this.#d=b*S+d*C}transform(a,b,c,d,e,f){const ta=this.#a,tb=this.#b,tc=this.#c,td=this.#d,te=this.#e,tf=this.#f;this.a=a*ta+c*tb;this.b=b*ta+d*tb;this.c=a*tc+c*td;this.d=b*tc+d*td;this.e=a*te+c*tf+e;this.f=b*te+d*tf+f}
new(a=1,b=0,c=0,d=1,e=0,f=0){return new K(this.j,a,b,c,d,e,f)}reset(a=1,b=0,c=0,d=1,e=0,f=0,ux=0,uy=0,uz=0,uw=0,vx=0,vy=0,vz=0,vw=0){this.#a=a;this.#b=b;this.#c=c;this.#d=d;this.#e=e;this.#f=f;this.#ux=ux;this.#uy=uy;this.#uz=uz;this.#uw=uw;this.#vx=vx;this.#vy=vy;this.#vz=vz;this.#vw=vw}box(x=0,y=0,w=1,h=w){this.#e+=x*this.#a+y*this.#c;this.#f+=x*this.#b+y*this.#d;this.#a*=w;this.#b*=w;this.#c*=h;this.#d*=h}to(x,y){if(typeof x=='object')({x,y}=x);return{x:this.#a*x+this.#c*y+this.#e,y:this.#b*x+this.#d*y+this.#f}}from(x,y){if(typeof x=='object')({x,y}=x);const a=this.#a,b=this.#b,c=this.#c,d=this.#d,det=a*d-b*c;return{x:(x*d-x*c+c*this.#f-d*this.#e)/det,y:(y*a-y*b+b*this.#e-a*this.#f)/det}}copy(){return new K(this.j,this.#a,this.#b,this.#c,this.#d,this.#e,this.#f,this.#ux,this.#uy,this.#uz,this.#uw,this.#vx,this.#vy,this.#vz,this.#vw)}uniform1(ux=0,uy=0,uz=0,uw=0){this.#ux=ux;this.#uy=uy;this.#uz=uz;this.#uw=uw}uniform2(vx=0,vy=0,vz=0,vw=0){this.#vx=vx;this.#vy=vy;this.#vz=vz;this.#vw=vw}clear(r=0,g=0,b=0,a=0){g.clearColor(r,g,b,a);L=(L&240)|(r==r)|(g==g)<<1|(b==b)<<2|(a==a)<<3;g.colorMask(L&1,L&2,L&4,L&8);let m=16384;if(this.j)if(++this.j.S>=8)this.j.S=0,m|=1024;else if(++O>=8)O=0,m|=1024;g.stencilMask(1<<(this.j?this.j.S:O));if(j!=this.j)g.bindFramebuffer(36160,j=this.j);g.clear(m)}clearColor(r=0,g=0,b=0,a=0){g.clearColor(r,g,b,a);L=(L&240)|(r==r)|(g==g)<<1|(b==b)<<2|(a==a)<<3;g.colorMask(L&1,L&2,L&4,L&8);if(j!=this.j)g.bindFramebuffer(36160,j=this.j);g.clear(16384)}clearStencil(){if(this.j)if(++this.j.S>=8){this.j.S=0;if(j!=this.j)g.bindFramebuffer(36160,j=this.j);g.clear(1024)}else if(++O>=8){O=0;if(j!=this.j)g.bindFramebuffer(36160,j=this.j);g.clear(1024)}g.stencilMask(1<<(this.j?this.j.S:O))}draw(K,e,m=15,k=1135940){const W=this.j?this.j.width:g.canvas.width,H=this.j?this.j.height:g.canvas.height;if(!W|!H)return;if(S!=W||T!=H)g.viewport(0,0,W,H);I[0]=this.#a*2;I[3]=this.#b*2;I[1]=this.#c*2;I[4]=this.#d*2;I[2]=this.#e*2-1;I[5]=this.#f*2-1;if(j!=this.j)g.bindFramebuffer(36160,j=this.j);let b=this.j?.t?.u??-1;if(b>-1){if(U!=b)g.activeTexture(33984+(U=b));g.bindTexture(3553,null);this.j.t.u=-1}g.uniformMatrix2x3fv(E.m,0,I);if(ux!=this.#ux||uy!=this.#uy||uz!=this.#uz||uw!=this.#uw)g.uniform4f(E.a,ux=this.#ux,uy=this.#uy,uz=this.#uz,uw=this.#uw);if(vx!=this.#vx||vy!=this.#vy||vz!=this.#vz||vw!=this.#vw)g.uniform4f(E.b,vx=this.#vx,vy=this.#vy,vz=this.#vz,vw=this.#vw);m=m&2281701631|k<<8;if((L^m)&15)g.colorMask(m&1,m&2,m&4,m&8);if((L^m)&496){if(m&240){const s=j?j.S:O;if(!(L&240))g.enable(2960);if((m^L)&240){g.stencilFunc(m&32?m&16?512:517:m&16?514:519,255,1<<s);const o=m&128?m&64?5386:7681:m&64?0:7680;g.stencilOp(o,o,o)}}else if(L&240)g.disable(2960)}if((L^m)&1996488704)g.blendEquationSeparate((m>>24&7)+32773,(m>>28&7)+32773);if((L^m)&16776960)g.blendFuncSeparate((m>>8&15)+766*!!(m&3584),(m>>16&15)+766*!!(m&917504),(m>>12&15)+766*!!(m&57344),(m>>20&15)+766*!!(m&14680064));if((m^L)&134217728)if(m&134217728)g.enable(3024);else g.disable(3024);L=m;if(Array.isArray(e)){if(e.length>8)throw new RangeError('.draw(): Cannot use more than 8 textures at a time');let av=255,i=0;for(;i<e.length;i++){const t=e[i];if(t.u>-1)av&=-129>>t.u,g.uniform1i(E.t[i],t.u)}for(i=0;i<e.length;i++){const t=e[i];if(t.u>-1)continue;U=Math.clz32(av)-24;av&=-129>>U;g.activeTexture(33984+U);X(t);g.uniform1i(E.t[i],U)}}else if(e){if(e.u>-1)g.uniform1i(E.t[0],e.u);else{if(U!=0)g.activeTexture(33984+(U=0));X(e);g.uniform1i(E.t[0],0)}}if(K instanceof WebGLVertexArrayObject){if(G!=K)g.bindVertexArray(G=K);g.drawArraysInstanced(5,0,4,K.count)}else if(K.byteLength){g.bindBuffer(34962,C);if(G!=D)g.bindVertexArray(G=D);g.bufferData(34962,K,35040);g.drawArraysInstanced(5,0,4,K.length/14)}else{g.bindBuffer(34962,C);if(G!=D)g.bindVertexArray(G=D);for(let i=0;i<K.R.length;i++)g.bufferData(34962,K.R[i],35040),g.drawArraysInstanced(5,0,4,585);g.bufferData(34962,K.R.l,35040);g.drawArraysInstanced(5,0,4,K.R.i/14)}}}N.setTargetCanvas=c=>{g=c.getContext('webgl2',{preserveDrawingBuffer:0,antialias:0,depth:0,premultipliedAlpha:1,S:1});g.pixelStorei(37440,1);g.pixelStorei(37441,1);C=g.createBuffer();g.bindBuffer(34962,C);g.bufferData(34962,32760,35040);D=g.createVertexArray();g.bindVertexArray(G=D);g.vertexAttribPointer(0,3,5126,0,56,0);g.vertexAttribPointer(1,3,5126,0,56,12);g.vertexAttribPointer(2,4,5126,0,56,24);g.vertexAttribPointer(3,4,5126,0,56,40);P=4;while(P-->0)g.enableVertexAttribArray(P),g.vertexAttribDivisor(P,1);Q=N.Shader(`void main(){color=texture(tex1,uv)*(1.-tint);}`);g.useProgram(E=Q);g.clearStencil(0);g.stencilMask(1);g.disable(2929);g.enable(3042);g.disable(3024);for(P of ['EXT_color_buffer_half_float','EXT_color_buffer_float'])g.getExtension(P);j=G=null;O=0,L=285217039,ux=0,uy=0,uz=0,uw=0,vx=0,vy=0,vz=0,vw=0;return new K(null)};Object.assign(N,{R:1,G:2,B:4,A:8,RGB:7,RGBA:15,CLIP_ZERO:16,CLIP_ONE:32,NO_DRAW:48,UNSET:64,SET:128,FLIP:192,DITHERING:134217728,ONE:17,RGB_ONE:1,A_ONE:16,SRC_COLOR:34,RGB_SRC_COLOR:2,ONE_MINUS_SRC_COLOR:51,RGB_ONE_MINUS_SRC_COLOR:3,SRC_ALPHA:68,RGB_SRC_ALPHA:4,A_SRC:64,ONE_MINUS_SRC_ALPHA:85,RGB_ONE_MINUS_SRC_ALPHA:5,A_ONE_MINUS_SRC:80,DST_COLOR:136,RGB_DST_COLOR:8,ONE_MINUS_DST_COLOR:153,RGB_ONE_MINUS_DST_COLOR:9,DST_ALPHA:102,RGB_DST_ALPHA:6,A_DST:96,ONE_MINUS_DST_ALPHA:119,RGB_ONE_MINUS_DST_ALPHA:7,A_ONE_MINUS_DST:112,SRC_ALPHA_SATURATE:170,RGB_SRC_ALPHA_SATURATE:10,ADD:17,RGB_ADD:1,A_ADD:16,SUBTRACT:85,RGB_SUBTRACT:5,SUBTRACT:80,REVERSE_SUBTRACT:102,RGB_REVERSE_SUBTRACT:6,A_REVERSE_SUBTRACT:96,MIN:34,RGB_MIN:2,A_MIN:32,MAX:51,RGB_MAX:3,A_MAX:48,UPSCALE_PIXELATED:1,DOWNSCALE_PIXELATED:2,DOWNSCALE_MIPMAP_NEAREST:4,PIXELATED:7,NO_MIPMAPS:8,CLAMP_X:16,REPEAT_MIRRORED_X:32,CLAMP_Y:64,REPEAT_MIRRORED_Y:128});N.Blend=(s=17,d=0,c=17)=>s|d<<8|c<<16;N.Blend.REPLACE=1114129;N.PI??=Math.PI;N.colorSpace=t=>{g.drawingBufferColorSpace=t};N.Target=(w=0,h=0,F=N.Formats.RGBA8,k=!1)=>{const t=g.createFramebuffer();g.bindFramebuffer(36008,t);t.S=NaN;t.t=null;if(typeof w=='boolean')k=w,w=0;if(typeof w=='object')t.t=w,k=h,F=t.t.F,t.width=w=t.t.width,t.height=h=t.t.height,t.S=0,X(t.t),g.framebufferTexture2D(36008,36064,3553,t.t,0);else{t.width=w;t.height=h;const s=g.createRenderbuffer();g.bindRenderbuffer(36161,s);g.renderbufferStorage(36161,F[0],w,h);g.framebufferRenderbuffer(36008,36064,36161,s)}if(!k){const s=g.createRenderbuffer();g.bindRenderbuffer(36161,s);g.renderbufferStorage(36161,36168,w,h);g.framebufferRenderbuffer(36008,36128,36161,s);t.S=0}return new K(t)};N.Shader=s=>{const p=g.createProgram(),v=g.createShader(35633),f=g.createShader(35632);g.shaderSource(v,`#version 300 es
uniform mat2x3 g;layout(location=0)in mat2x3 m;layout(location=2)in vec4 u;layout(location=3)in vec4 t;out vec2 uv;out vec4 tint;void main(){vec3 p=vec3(gl_VertexID&1,gl_VertexID>>1,1.);gl_Position=vec4(vec3(p*m,1.)*g,0.,1.);uv=u.xy+p.xy*u.zw;tint=t;}`);g.compileShader(v);g.shaderSource(f,`#version 300 es
precision mediump float;in vec2 uv;in vec4 tint;out vec4 color;uniform sampler2D tex1,tex2,tex3,tex4,tex5,tex6,tex7,tex8;uniform vec4 u1,u2;`+s);g.compileShader(f);const e=g.getShaderInfoLog(f);if(e)console.warn(`GLSL error:
`,e),g.shaderSource(f,`#version 300 es
precision mediump float;in vec2 uv;in vec4 tint;out vec4 color;uniform sampler2D tex1,tex2,tex3,tex4,tex5,tex6,tex7,tex8;uniform vec4 u1,u2;void main(){color=vec4(0,0,0,1);}`),g.compileShader(f);g.attachShader(p,v);g.attachShader(p,f);g.linkProgram(p);p.m=g.getUniformLocation(p,'g');p.a=g.getUniformLocation(p,'u1');p.b=g.getUniformLocation(p,'u2');p.t=Array.from({length:8},(_,i)=>g.getUniformLocation(p,'tex'+(i+1)));return p};N.useShader=(p=Q)=>{const o=E;if(o!=p)g.useProgram(E=p);return o}}